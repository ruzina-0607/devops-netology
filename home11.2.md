## Домашнее задание к занятию «Микросервисы: принципы»
-------
### Задача 1: API Gateway
|ПО|Возможности|Вывод|
|--|-----------|-----|
|Amazon API Gateway|Облачный. Выставляется как сервис, предназначенный для создания, публикации, обслуживания, мониторинга и обеспечения безопасности API в любых масштабах. С одной стороны мы не можем его расширять функционально, а с другой стороны он заинтегрирован со всей инфраструктурой AWS. Он подключается к мониторингу, AWS CloudWatch, что позволяет контролировать, отслеживать и управлять количеством запросов. Он подключается к API Gateway Cache (отдельный сервис), что позволяет легко настраивать route и тд. Из его плюсов можно выделить следующее: - Создание API RESTful при помощи API HTTP или API REST. - Интерфейсы API WebSocket для разработки приложений, которым требуется двусторонняя связь в режиме реального времени. - Частная интеграция с AWS ELB и AWS Cloud Map. - Ключи API для сторонних разработчиков. - Генерирование клиентских SDK на многих языках, включая JavaScript, iOS и Android. - Внедрение подписи четвёртой версии для API REST и API WebSocket при авторизации и проверке запросов API к другим сервисам AWS API Gateway. - Авторизация с помощью AWS Lambda.|Считаю, что необходимо выбрать данное ПО. 1. Шлюз API создает API-интерфейсы WebSocket, которые: используют веб-сокет протокол, обеспечивающий полнодуплексную связь между клиентом и сервером с отслеживанием состояния. Присутствует маршрутизация входящих сообщений на основе содержимого сообщения. 2. Используются мощные и гибкие механизмы аутентификации, такие как AWS Identity and Access Management, функции авторизации Lambda и пулы пользователей Amazon Cognito. 3. Все API, созданные с помощью сервиса Amazon API Gateway, поддерживают только конечные точки HTTPS. По умолчанию Amazon API Gateway назначает для API внутренний домен, который автоматически использует сертификат сервиса Amazon API Gateway. Настраивая API для работы под другим доменным именем, вы можете предоставить для домена собственный сертификат.|
|NGINX Plus| платформа на базе HTTP-сервера, созданная с использованием модели Open Core и предназначенная для балансировки нагрузки сайтов с высоким трафиком. Особенности использования следующие: Проверка работоспособности приложений (контроль за сбоями в работе бэкендов). Мониторинг активности с экспортом метрик производительности через JSON. Метрики могут забираться в режиме реального времени и использоваться во внешних системах мониторинга для слежения и визуализации изменения производительности. Расширенные средства балансировки нагрузки, позволяющие определять сложные правила балансировки при распределении запросов пользователей. Динамическая реконфигурация на лету, предоставляющая простой HTTP API для изменения маршрутов обработки запросов без перезапуска серверного процесса (полезно для организации работы облачных систем без фиксированной структуры). Расширенные возможности по ведению логов (возможность отправки логов на удаленный централизованный сервер сбора логов с использованием протокола syslog). Настройки для обеспечения высокой доступности. Адаптивное потоковое вещание мультимедиа контента. Поддерживается потоковая доставка видео в форматах MP4, FLV, Adobe HDS и Apple HLS с возможностью адаптивного изменения битрейта в зависимости от параметров канала связи каждого клиента. Комплексная защита сайтов и приложений, трафика HTTP, TCP и UDP, контроль доступа и уязвимых ресурсов. Возможность обрабатывать сотни тысяч клиентов одновременно и обслуживать сотни тысяч ресурсов в секунду. Конфигурирование и тюнинг (анализ архитектуры, выявление узких мест, рекомендации по улучшению настроек, рецензирование логов и т.п.). Оптимизация производительности (тестирование производительности, симуляция пиковых нагрузок, рекомендации по оптимизации). Управление техническими аккаунтами (планирование и технический аудит, планирование развития и прием рекомендаций по реализации в nginx новых возможностей).|-|
|Spring cloud gateway|Это отдельное Spring Boot приложение, через которое проходят все запросы, реализация шаблона Reverse Proxy. Прокси, в свою очередь, анализирует запрос, перенаправляет его к нужному микросервису и возвращает ответ обратно. Можно зафиксировать REST API на прокси и менять внутреннюю структуру как угодно. Снаружи ничего не поменяется, просто прокси будет обращаться по другим адресам. А обращения к самому прокси останутся прежними. Возможности Spring Cloud Gateway: Построен на Spring Framework 5, Project Reactor и Spring Boot 2.0. Возможность сопоставления маршрутов по любому атрибуту запроса. Предикаты и фильтры специфичны для маршрутов. Интеграция с Circuit Breaker. Интеграция Spring Cloud DiscoveryClient. Легко писать предикаты и фильтры. Ограничение скорости запросов. Переписывание пути.|-|
|Netflix Zuul|Это основанный на JVM маршрутизатор и серверный балансировщик нагрузки от Netflix. Используется с аннотацией @EnableZuulProxy. Zuul автоматически выберет список серверов в Eureka. Он хорошо работает в связке с Hystrix, Ribbon и Turbine. Он запускает предварительные фильтры (pre-filters), затем передает запрос с помощью клиента Netty, а затем возвращает ответ после запуска постфильтров (post-filters). Фильтры являются основой функциональности Zuul. Они могут выполняться в разных частях жизненного цикла “запрос-ответ”, т.к. они отвечают за бизнес-логику приложения и могут выполнять самые разные задачи.|-|
