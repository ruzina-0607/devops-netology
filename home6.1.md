Задача 1
-------------------
Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

Электронные чеки в json виде
Склады и автомобильные дороги для логистической компании
Генеалогические деревья
Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
Отношения клиент-покупка для интернет-магазина
Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

Ответ: 
Электронные чеки в json виде
Документо-ориентированный NoSQL, так как такие БД хранят данные как документы.

Склады и автомобильные дороги для логистической компании
Графовые БД, так как в такй структуре можно задавать дополнительные атрибуты для выбора оптимального маршрута

Генеалогические деревья
Иерархическая БД. В ней данные представлены в виде древовидной структуры (родитель - потомок). Каждая запись имеет не более одного родителя и несколько потомков, что подходит для наших задач

Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
Key-Value БД. Например, можно использовать Redis, так как у него есть поддержка TTL, хранение данных в оперативной памяти и возможность масштабирования. Эти преимущества идеально подходят для кэша

Отношения клиент-покупка для интернет-магазина
Реляционные БД, так как они обеспечивают связанность данных между различными таблицами между собой (например, список клиентов и список товаров). Нет необходимости заводить отдельные списки типа key-value или БД сетевого типа (то есть не надо дублировать данные)

Задача 2
--------------
Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

Данные записываются на все узлы с задержкой до часа (асинхронная запись)
При сетевых сбоях, система может разделиться на 2 раздельных кластера
Система может не прислать корректный ответ или сбросить соединение
А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

Ответ:
Данные записываются на все узлы с задержкой до часа (асинхронная запись)
AP - так как отсутствует консистентность
PA/EL - при разделении данные доступны, но не консистентны, при отсутствии разделения приоритет отдается задержке

При сетевых сбоях, система может разделиться на 2 раздельных кластера
AP, так как в описании реализации как раз говорится о том, что в случае отсутствия связи между узлами, данные остаются доступными (при этом не будет консистентности
PA/EC (либо PA/EL) - при разделении есть доступность, но нет консистентности, при отсутствии разделения не указан приоритет, поэтому может быть как EC, так и EL \

Система может не прислать корректный ответ или сбросить соединение
PC, так как система может сбросить соединение, то есть отсутствует доступность
PC/EC - при разделении нет доступности, при отсутствии разделения система сохраняет консистентность

Задача 3
-------------------
Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

Ответ:
Не могут, так как это два противоположных принципа. В основе BASE - доступность данных даже в ущерб согласованности. ACID же основывается на согласованности данных и надежности в случае сбоев.

Задача 4
---------------
Вам дали задачу написать системное решение, основой которого бы послужили:

фиксация некоторых значений с временем жизни
реакция на истечение таймаута
Вы слышали о key-value хранилище, которое имеет механизм Pub/Sub. Что это за система? Какие минусы выбора данной системы?

Ответ:
Key-value хранилище с мехазмом pub/sub - это Redis. 

1. если рассматривать redis, как sub/pub систему, то БД не хранит у себя сообщения, отправляет потребителям и затем удаляет.
2. redis является однопоточным приложением. Он принимает запросы в один поток. Следствие - деградация системы, если у нас много клиентов. В новых версиях частичная многопоточность ограничена удалением объектов в фоновом режиме и блокировкой команд, реализованных через модули Redis.
3. Если в ОС используется huge_page, то его нужно отключить, так как он негативно влияет на оп. память и сам redis. Минус - просто как дополнительная настройка нужна.
4. Если храним много ключей, то при одновременном их удалении может возникнуть задержка при записи новых ключей. Нельзя хранить большое количество ключей с одновременным концом времени жизни.
5. Клиенты могут подписываться на каналы Pub/Sub, чтобы получать события, влияющие каким-либо образом на набор данных Redis. Если клиент Pub/Sub отключится и снова подключится позже, все события, доставленные во время отключения клиента, будут потеряны.

Я не работала с данной системой и соответственно полезу в интернет искать ответ. Так как в данной лекции кроме его определения не было ничего сказано. Авторы ("писаки") данных статей не докладывали мне о своем образовании и опыте, но обычный человек не полезет писать об этом. Я работаю в банке, и мы не используем данную систему, возможно она не для меня популярна, но статьи еще могут быть древних годов и не всегда принято писать дату статей. Для незнакомого с этой системой человека, знаете, сложно определить, правда это или нет. Еще здорово, что на последней лекции еще 3 минуты рассказывают про redis, а ответ в таком тоне просят в 1 лекции. Я не находила такой документации, как скинули в последней лекции (возможно русский поиск ее никогда и не найдет). О достоинствах там пишут здорово, минусы они свои тоже не выпячивают. 
